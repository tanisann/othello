<!DOCTYPE html>
<html lang="ja">
    <head>
        <meta charset='UTF-8'>
        <title>reversi</title>
        <link rel="stylesheet" href="https://pyscript.net/latest/pyscript.css" />
        <script defer src="https://pyscript.net/latest/pyscript.js"></script>
        <py-config>
            packages = ["numpy"]
            [[fetch]]
            files = ["./play_for_html.py","./othello44h3.txt","./othello66h3.txt","./othello88h3.txt"]
        </py-config>
        <style type='text/css'>
        div#paging { text-align: center; position: fixed; bottom: 0px; right: 45%; }

        div#pagingbox { background: rgb(255, 255, 255); }
        th { background: rgb(0, 128, 0); }

        th, td { border: 1px solid; width: 100px; height: 100px; text-align: center; vertical-align: middle; }

        table { border: 3px solid; border-collapse: collapse; white-space: nowrap; background: rgb(0, 128, 0); }

        footer { position: fixed; width: 100%; background-color: rgb(192, 192, 192); padding: 15px 0px; bottom: 0px; }
    
        .can_put { display: inline-block; width: 100px; height: 100px; border-radius: 0%; vertical-align: middle; background: yellow; }

        .stone_black { display: inline-block; width: 80px; height: 80px; border-radius: 50%; vertical-align: middle; background: black; }

        .stone_white { display: inline-block; width: 80px; height: 80px; border-radius: 50%; vertical-align: middle; background: white; }

        </style>

</head>
<body>
    <h1>reversi</h1>
    <button py-click="SQ_setting(4)" class="py-button">4*4</button>
    <button py-click="SQ_setting(6)" class="py-button">6*6</button>
    <button py-click="SQ_setting(8)" class="py-button">8*8</button><br><br>
    <button py-click="start_sente()" id="sente" class="py-button">先手</button>
    <button py-click="start_gote()" id="gote" class="py-button">後手</button>
      
    <p>4*4</p><div id="p4"></div>
    <div id="board4"><table><tr><td id="400" py-click="click(0,0)"><span id="s400"></span></td><td id="401" py-click="click(0,1)"><span id="s401" class="can_put"></span></td><td id="402" py-click="click(0,2)"><span id="s402"></span></td><td id="403" py-click="click(0,3)"><span id="s403"></span></td></tr><tr><td id="410" py-click="click(1,0)"><span id="s410" class="can_put"></span></td><td id="411" py-click="click(1,1)"><span id="s411" class="stone_white"></span></td><td id="412" py-click="click(1,2)"><span id="s412" class="stone_black"></span></td><td id="413" py-click="click(1,3)"><span id="s413"></span></td></tr><tr><td id="420" py-click="click(2,0)"><span id="s420"></span></td><td id="421" py-click="click(2,1)"><span id="s421" class="stone_black"></span></td><td id="422" py-click="click(2,2)"><span id="s422" class="stone_white"></span></td><td id="423" py-click="click(2,3)"><span id="s423" class="can_put"></span></td></tr><tr><td id="430" py-click="click(3,0)"><span id="s430"></span></td><td id="431" py-click="click(3,1)"><span id="s431"></span></td><td id="432" py-click="click(3,2)"><span id="s432" class="can_put"></span></td><td id="433" py-click="click(3,3)"><span id="s433"></span></td></tr></table></div>      
    <p>6*6</p><div id="p6"></div>
    <div id="board6"><table><tr><td id="600" py-click="click(0,0)"><span id="s600"></span></td><td id="601" py-click="click(0,1)"><span id="s601"></span></td><td id="602" py-click="click(0,2)"><span id="s602"></span></td><td id="603" py-click="click(0,3)"><span id="s603"></span></td><td id="604" py-click="click(0,4)"><span id="s604"></span></td><td id="605" py-click="click(0,5)"><span id="s605"></span></td></tr><tr><td id="610" py-click="click(1,0)"><span id="s610"></span></td><td id="611" py-click="click(1,1)"><span id="s611"></span></td><td id="612" py-click="click(1,2)"><span id="s612" class="can_put"></span></td><td id="613" py-click="click(1,3)"><span id="s613"></span></td><td id="614" py-click="click(1,4)"><span id="s614"></span></td><td id="615" py-click="click(1,5)"><span id="s615"></span></td></tr><tr><td id="620" py-click="click(2,0)"><span id="s620"></span></td><td id="621" py-click="click(2,1)"><span id="s621" class="can_put"></span></td><td id="622" py-click="click(2,2)"><span id="s622" class="stone_white"></span></td><td id="623" py-click="click(2,3)"><span id="s623" class="stone_black"></span></td><td id="624" py-click="click(2,4)"><span id="s624"></span></td><td id="625" py-click="click(2,5)"><span id="s625"></span></td></tr><tr><td id="630" py-click="click(3,0)"><span id="s630"></span></td><td id="631" py-click="click(3,1)"><span id="s631"></span></td><td id="632" py-click="click(3,2)"><span id="s632" class="stone_black"></span></td><td id="633" py-click="click(3,3)"><span id="s633" class="stone_white"></span></td><td id="634" py-click="click(3,4)"><span id="s634" class="can_put"></span></td><td id="635" py-click="click(3,5)"><span id="s635"></span></td></tr><tr><td id="640" py-click="click(4,0)"><span id="s640"></span></td><td id="641" py-click="click(4,1)"><span id="s641"></span></td><td id="642" py-click="click(4,2)"><span id="s642"></span></td><td id="643" py-click="click(4,3)"><span id="s643" class="can_put"></span></td><td id="644" py-click="click(4,4)"><span id="s644"></span></td><td id="645" py-click="click(4,5)"><span id="s645"></span></td></tr><tr><td id="650" py-click="click(5,0)"><span id="s650"></span></td><td id="651" py-click="click(5,1)"><span id="s651"></span></td><td id="652" py-click="click(5,2)"><span id="s652"></span></td><td id="653" py-click="click(5,3)"><span id="s653"></span></td><td id="654" py-click="click(5,4)"><span id="s654"></span></td><td id="655" py-click="click(5,5)"></td></tr></table></div>
    <p>8*8</p><div id="p8"></div>
    <div id="board8"><table><tr><td id="800"></td><td id="801"></td><td id="802"></td><td id="803"></td><td id="804"></td><td id="805"></td><td id="806"></td><td id="807"></td></tr><tr><td id="810"></td><td id="811"></td><td id="812"></td><td id="813"></td><td id="814"></td><td id="815"></td><td id="816"></td><td id="817"></td></tr><tr><td id="820"></td><td id="821"></td><td id="822"></td><td id="823"><span class="can_put"></span></td><td id="824"></td><td id="825"></td><td id="826"></td><td id="827"></td></tr><tr><td id="830"></td><td id="831"></td><td id="832"><span class="can_put"></span></td><td id="833"><span class="stone_white"></span></td><td id="834"><span class="stone_black"></span></td><td id="835"></td><td id="836"></td><td id="837"></td></tr><tr><td id="840"></td><td id="841"></td><td id="842"></td><td id="843"><span class="stone_black"></span></td><td id="844"><span class="stone_white"></span></td><td id="845"><span class="can_put"></span></td><td id="846"></td><td id="847"></td></tr><tr><td id="850"></td><td id="951"></td><td id="852"></td><td id="853"></td><td id="854"><span class="can_put"></span></td><td id="855"></td><td id="856"></td><td id="857"></td></tr><tr><td id="860"></td><td id="861"></td><td id="862"></td><td id="863"></td><td id="864"></td><td id="865"></td><td id="866"></td><td id="867"></td></tr><tr><td id="870"></td><td id="871"></td><td id="872"></td><td id="873"></td><td id="874"></td><td id="875"></td><td id="876"></td><td id="877"></td></tr></table></div>


    <hr>
    <p>遊び方</p>
    <p>1.4、6または8のボタンを押します</p>
    <p> 2.先手または後手のボタンを押します</p>
    <p>3.スタートします。もう一度遊ぶ場合も同様にします</p><br>
    <p>※注意※</p>
    <p>・プレイ中にボタンを押さないてください。バグります</p>
    <p>・8は学習不足です(というか、ほとんどランダムです)</p>
    <p>・棋譜を保存させていただきます</p>
    <hr>
      
    <p>感想・バグ報告等ございましたら、ぜひコメントしてください</p>

    <p>コメント<br><input type='text' name='coment'></p>


    <py-script>
      from play_for_html import Othello
      from pyscript import Element
      import numpy as np
      import random
      import copy
      
      def SQ_setting(sq):
        global SQ
        SQ = sq
      
      def start_sente():
        global othello
        othello = Othello(SQ,3,1)
        show()
      
      def start_gote():
        global othello
        othello = Othello(SQ,3,2)
        show()
        
      def click(y,x):
        othello.click(int(x),int(y))
        show()
        if not othello.is_end:
            othello.com_yomi()
            show()
        
      def show():
        board = othello.board
        placable_board = othello.placable_board
        for y in range(SQ):
            for x in range(SQ):
                put_td = Element(f"s{SQ}{y}{x}")
                print(put_td.element.classList)
                if board[y][x] == "black":
                    if "stone_white" in put_td.element.classList:
                        put_td.remove_class("stone_white")
                    put_td.add_class("stone_black")
                elif board[y][x] == "white":
                    if "stone_black" in put_td.element.classList:
                        put_td.remove_class("stone_black")
                    put_td.add_class("stone_white")
                elif board[y][x] == 0:
                    if "stone_white" in put_td.element.classList:
                        put_td.remove_class("stone_white")
                    if "stone_black" in put_td.element.classList:
                        put_td.remove_class("stone_black")

                if placable_board[y][x]:
                    put_td.add_class("can_put")
                else:
                    if "can_put" in put_td.element.classList:
                        put_td.remove_class("can_put")
        


    </py-script>
</body>
</html>
